<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lacak Pendaftaran Layanan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9; /* slate-100 */
        }
        .dark body {
            background-color: #0f172a; /* slate-900 */
        }
        .fade-in-up {
            animation: fadeInUp 0.7s ease-out forwards;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="dark:bg-slate-900">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-3xl">

        <!-- Header -->
        <header class="text-center mb-10">
            <div class="flex justify-center items-center mb-4">
                 <svg class="h-14 w-14 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.288 15.045A3.746 3.746 0 017.5 15.75c-1.026 0-1.944-.683-2.25-1.653M16.5 15.75c.249 0 .487.025.712.072M9 12.75a2.25 2.25 0 100-4.5 2.25 2.25 0 000 4.5zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                 </svg>
            </div>
            <h1 class="text-4xl sm:text-5xl font-extrabold text-slate-800 dark:text-slate-100 tracking-tight">Lacak Progres Pendaftaran</h1>
            <p class="text-lg text-slate-500 dark:text-slate-400 mt-3">Masukkan ID Pelanggan untuk melihat detail status layanan Anda.</p>
        </header>

        <!-- Search Card -->
        <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg shadow-slate-200/50 dark:shadow-black/20 p-6 md:p-8 mb-10">
            <form id="trackingForm" class="flex flex-col sm:flex-row items-center gap-4">
                 <input type="text" id="registrationId" class="w-full px-5 py-4 text-lg text-slate-800 bg-slate-100 dark:bg-slate-700 dark:text-slate-200 border-2 border-slate-200 dark:border-slate-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all" placeholder="Masukkan ID Registrasi Anda" required>
                <button type="submit" id="submitButton" class="w-full sm:w-auto flex-shrink-0 bg-red-600 text-white font-bold text-lg py-4 px-10 rounded-xl hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-800 transition-all duration-300 flex items-center justify-center space-x-2">
                    <span id="buttonText">Lacak</span>
                    <svg id="buttonSpinner" class="animate-spin h-6 w-6 text-white hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
                    </svg>
                </button>
            </form>
        </div>

        <!-- Status Result Area -->
        <div id="statusResult" class="hidden">
            <!-- Content will be injected here -->
        </div>

    </div>

    <script>
        // --- MOCK DATABASE ---
        const mockApiData = {
            'BNT12345678': { nama: 'Budi Santoso', paket: 'Internet 100 Mbps', currentStep: 'validasi', history: [ { id: 'registrasi', date: '25 Jun 2025, 10:30', message: 'Permintaan pendaftaran Anda telah kami terima dan akan segera diproses.' }, { id: 'validasi', date: '26 Jun 2025, 09:00', message: 'Tim kami sedang melakukan validasi terhadap data dan dokumen yang Anda lampirkan.' }, ] },
            'BNT29876543': { nama: 'Citra Lestari', paket: 'Internet + TV 100 Mbps', currentStep: 'payment', history: [ { id: 'registrasi', date: '24 Jun 2025, 14:00', message: 'Pendaftaran diterima.' }, { id: 'validasi', date: '25 Jun 2025, 11:00', message: 'Data dan dokumen telah berhasil divalidasi.' }, { id: 'payment', date: '25 Jun 2025, 11:05', message: 'Silakan lakukan pembayaran untuk melanjutkan ke tahap instalasi.' }, ] },
            'BNT31415926': { nama: 'Agus Wijaya', paket: 'Internet + TV 150 Mbps', currentStep: 'instalasi', history: [ { id: 'registrasi', date: '24 Jun 2025, 09:00', message: 'Pendaftaran diterima.' }, { id: 'validasi', date: '24 Jun 2025, 15:00', message: 'Data dan dokumen telah berhasil divalidasi.' }, { id: 'payment', date: '25 Jun 2025, 10:00', message: 'Pembayaran berhasil dikonfirmasi.' }, { id: 'instalasi', date: '26 Jun 2025, 11:00', message: 'Tim teknisi kami telah dijadwalkan dan akan segera menuju lokasi Anda.' } ] },
            'BNT48765123': { nama: 'Dewi Anggraini', paket: 'Internet 300 Mbps', currentStep: 'aktif', history: [ { id: 'registrasi', date: '20 Jun 2025, 08:00', message: 'Pendaftaran diterima.' }, { id: 'validasi', date: '20 Jun 2025, 13:00', message: 'Data divalidasi.' }, { id: 'payment', date: '21 Jun 2025, 09:20', message: 'Pembayaran berhasil dikonfirmasi.' }, { id: 'instalasi', date: '23 Jun 2025, 14:00', message: 'Proses instalasi perangkat di lokasi Anda telah berhasil diselesaikan oleh teknisi.' }, { id: 'aktif', date: '23 Jun 2025, 14:30', message: 'Selamat! Layanan Anda telah aktif dan siap digunakan.' }, ] },
            'BNT99999999': { nama: 'Fajar Nugroho', paket: 'Internet 100 Mbps', currentStep: 'batal', history: [ { id: 'registrasi', date: '22 Jun 2025, 18:00', message: 'Pendaftaran diterima.' }, { id: 'batal', date: '23 Jun 2025, 10:05', message: 'Pendaftaran tidak dapat dilanjutkan karena data tidak sesuai. Hubungi 147 untuk informasi lebih lanjut.' }, ] }
        };

        const statusConfig = {
            'registrasi': { title: 'Registrasi Diterima', icon: 'M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10' },
            'validasi': { title: 'Validasi Data', icon: 'M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286z' },
            'payment': { title: 'Menunggu Pembayaran', icon: 'M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3.375' },
            'instalasi': { title: 'Proses Instalasi', icon: 'M5.25 14.25h13.5m-13.5 0a3 3 0 01-3-3V7.5a3 3 0 013-3h13.5a3 3 0 013 3v3.75a3 3 0 01-3 3m-13.5 0V12a1.5 1.5 0 011.5-1.5h10.5a1.5 1.5 0 011.5 1.5v2.25' },
            'aktif': { title: 'Layanan Aktif', icon: 'M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z' },
            'batal': { title: 'Dibatalkan', icon: 'M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636' }
        };
        const allSteps = ['registrasi', 'validasi', 'payment', 'instalasi', 'aktif'];

        // --- Event Listener ---
        document.getElementById('trackingForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const registrationId = document.getElementById('registrationId').value.trim().toUpperCase();
            const statusResultContainer = document.getElementById('statusResult');
            const submitButton = document.getElementById('submitButton');
            const buttonText = document.getElementById('buttonText');
            const buttonSpinner = document.getElementById('buttonSpinner');
            
            if (!registrationId) {
                statusResultContainer.innerHTML = buildErrorHtml('ID Registrasi tidak boleh kosong.');
                statusResultContainer.classList.remove('hidden');
                return;
            }
            
            buttonText.textContent = 'Mencari...';
            buttonSpinner.classList.remove('hidden');
            submitButton.disabled = true;

            setTimeout(() => {
                const resultData = mockApiData[registrationId];
                const html = resultData ? buildSuccessHtml(registrationId, resultData) : buildErrorHtml(`ID Registrasi "<b>${registrationId}</b>" tidak ditemukan.`);
                statusResultContainer.innerHTML = html;
                statusResultContainer.classList.remove('hidden');
                
                buttonText.textContent = 'Lacak';
                buttonSpinner.classList.add('hidden');
                submitButton.disabled = false;
            }, 1000);
        });

        // --- HTML Builder Functions ---
        const buildErrorHtml = (message) => `<div class="fade-in-up text-center bg-white dark:bg-slate-800 rounded-xl shadow-lg px-6 py-8"><h3 class="text-xl font-semibold text-red-600">Gagal Melacak</h3><p class="mt-2 text-slate-500 dark:text-slate-400">${message}</p></div>`;

        function buildSuccessHtml(id, data) {
            const currentStatusConfig = statusConfig[data.currentStep];
            const historyMap = new Map(data.history.map(item => [item.id, item]));
            
            let statusBadgeHtml;
            if (data.currentStep === 'aktif') {
                statusBadgeHtml = `<div class="inline-flex items-center space-x-3 text-base py-2.5 px-5 rounded-full bg-emerald-100 dark:bg-emerald-900/50 text-emerald-800 dark:text-emerald-200 font-semibold">
                    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span>${currentStatusConfig.title}</span>
                </div>`;
            } else if (data.currentStep === 'batal') {
                statusBadgeHtml = `<div class="inline-flex items-center space-x-3 text-base py-2.5 px-5 rounded-full bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-200 font-semibold">
                    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z" /></svg>
                    <span>${currentStatusConfig.title}</span>
                </div>`;
            } else {
                 statusBadgeHtml = `<div class="inline-flex items-center space-x-3 text-base py-2.5 px-5 rounded-full bg-orange-100 dark:bg-orange-900/50 text-orange-800 dark:text-orange-200 font-semibold">
                    <svg class="animate-spin h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <span>${currentStatusConfig.title}</span>
                </div>`;
            }

            const mainCardHtml = `
                <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl shadow-slate-200/50 dark:shadow-black/20 p-6 lg:p-8">
                    <div class="text-center mb-8">${statusBadgeHtml}</div>
                    <div class="border-t border-slate-200 dark:border-slate-700 pt-8">
                        <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-6">
                             <div>
                                <dt class="text-base text-slate-500 dark:text-slate-400">Nama Pelanggan</dt>
                                <dd class="mt-1 text-lg font-semibold text-slate-900 dark:text-white">${data.nama}</dd>
                             </div>
                              <div>
                                <dt class="text-base text-slate-500 dark:text-slate-400">ID Registrasi</dt>
                                <dd class="mt-1 text-lg font-semibold text-slate-900 dark:text-white">${id}</dd>
                             </div>
                             <div class="sm:col-span-2">
                                <dt class="text-base text-slate-500 dark:text-slate-400">Paket Layanan</dt>
                                <dd class="mt-1 text-lg font-semibold text-slate-900 dark:text-white">${data.paket}</dd>
                             </div>
                        </dl>
                    </div>
                </div>
            `;
            
            let timelineHtml = '';
            const stepsToRender = data.currentStep === 'batal' ? data.history.map(h => h.id) : allSteps;

            stepsToRender.forEach((stepId, index) => {
                if (!statusConfig[stepId]) return;

                const stepInfo = historyMap.get(stepId);
                const isCompleted = historyMap.has(stepId);
                const isActive = data.currentStep === stepId;
                
                let markerClass = 'bg-slate-300 dark:bg-slate-600';
                let lineClass = 'bg-slate-300 dark:bg-slate-600';

                if(isCompleted) {
                    markerClass = 'bg-red-600 ring-4 ring-red-100 dark:ring-red-900/50';
                }
                if(!isActive && index > 0 && historyMap.has(allSteps[index - 1])) {
                    lineClass = 'bg-red-600';
                }

                timelineHtml += `
                    <div class="relative">
                        <!-- Line -->
                        ${ index < stepsToRender.length - 1 ? `<div class="absolute left-4 top-5 h-full w-0.5 ${lineClass}"></div>` : ''}
                        
                        <div class="flex items-start space-x-6">
                            <!-- Marker -->
                            <div class="relative z-10 flex h-8 w-8 items-center justify-center rounded-full ${markerClass}">
                                <svg class="h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="${statusConfig[stepId].icon}" /></svg>
                            </div>
                            <!-- Content -->
                            <div class="pt-0.5 pb-10 flex-1">
                                <h4 class="text-lg font-semibold ${isCompleted ? 'text-slate-800 dark:text-slate-100' : 'text-slate-400 dark:text-slate-500'}">${statusConfig[stepId].title}</h4>
                                ${stepInfo ? `
                                <p class="text-base text-slate-600 dark:text-slate-300 mt-2">${stepInfo.message}</p>
                                <p class="text-sm text-slate-400 dark:text-slate-500 mt-3">${stepInfo.date}</p>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });


            return `<div class="fade-in-up space-y-8">
                        ${mainCardHtml}
                        <div>
                            <h3 class="text-2xl font-bold text-slate-800 dark:text-slate-100 mb-6">Riwayat Progres</h3>
                            <div class="relative">${timelineHtml}</div>
                        </div>
                   </div>`;
        }
    </script>
</body>
</html>
